"use strict";if(document.addEventListener("sto_com_fs_content_loaded",e=>{"undefined"!=typeof TPP_SNAP&&e.detail&&e.detail.previewId&&TPP_SNAP.setPreviewElement(e.detail.previewId)}),"undefined"!=typeof TPP_SNAP){TPP_SNAP.onRerenderView(()=>location.reload(!0));const e=async e=>{const t=Array.from(e.querySelectorAll("[data-preview-id]")),n=await Promise.all(t.map(e=>TPP_SNAP.getElementStatus(e.dataset.previewId)));return t.map((e,t)=>({$el:e,status:n[t],previewId:e.dataset.previewId})).filter(({status:e})=>"Section"===e.elementType)};TPP_SNAP.registerButton({css:"tpp-icon-arrow-up",getIcon:function({$button:e}){TPP_SNAP.isLegacyCC?e.innerText="⇧":e.classList.add(this.css)},isVisible:({status:e})=>null===e.custom&&"Section"===e.elementType,isEnabled:async({$node:t})=>{const n=await e(t.parentNode),a=n.findIndex(({$el:e})=>e===t);return a>0},execute:async({$node:t,status:n})=>{const a=await e(t.parentNode),i=a.findIndex(({$el:e})=>e===t),s=await TPP_SNAP.execute("script:tpp_move_section",{sectionId:n.id,pos:""+(i-1)});s&&t.parentNode.insertBefore(t,a[i-1].$el)}}),TPP_SNAP.registerButton({css:"tpp-icon-arrow-down",getIcon:function({$button:e}){TPP_SNAP.isLegacyCC?e.innerText="⇩":e.classList.add(this.css)},isVisible:({status:e})=>null===e.custom&&"Section"===e.elementType,isEnabled:async({$node:t})=>{const n=await e(t.parentNode),a=n.findIndex(({$el:e})=>e===t);return a!==n.length-1},execute:async({$node:t,status:n})=>{const a=await e(t.parentNode),i=a.findIndex(({$el:e})=>e===t),s=await TPP_SNAP.execute("script:tpp_move_section",{sectionId:n.id,pos:""+(i+2)});s&&a[i+1].$el.insertAdjacentElement("afterend",t)}}),TPP_SNAP.overrideDefaultButton("move",{isVisible:()=>!1,isEnabled:()=>!1}),TPP_SNAP.overrideDefaultButton("workflows",{afterExecute:async()=>{location.reload(!0)}});const t=["W2400xH0","W2000xH0","W1476xH0","W1278xH0","W1025xH0","W768xH0","W576xH0"];TPP_SNAP.overrideDefaultButton("crop",{execute:async({$node:e,previewId:n})=>{const a=await TPP_SNAP.cropImage(n,t,!1);a&&e.dispatchEvent(new CustomEvent("imageUpdated",{detail:a}))}}),TPP_SNAP.onRequestPreviewElement(async e=>{try{const t=await TPP_SNAP.renderElement(e),n=t.formData.pt_sfIdentifier.value;await TPP_SNAP.setPreviewElement(e),null!=n?window.location.href=await TPP_SNAP.previewUrl()+n:location.reload(!0)}catch(e){console.error(e)}})}